# üîß –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Last.fm –≤—ñ–¥–∂–µ—Ç—É

## –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –ø—Ä–∞—Ü—é—î

### 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ .env —Ñ–∞–π–ª

–°—Ç–≤–æ—Ä—ñ—Ç—å –∞–±–æ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ `.env.local` –≤ –ø–∞–ø—Ü—ñ `ryoka-website-v2/`:

```env
LASTFM_API_KEY=–≤–∞—à_api_–∫–ª—é—á_—Ç—É—Ç
LASTFM_USERNAME=TheRyoka
```

‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û:** Username —Ç–µ–ø–µ—Ä `TheRyoka` (–∑–º—ñ–Ω–∏–≤—Å—è –∑ `just-ryoka`)

### 2. –û—Ç—Ä–∏–º–∞–π—Ç–µ API –∫–ª—é—á (—è–∫—â–æ –Ω–µ–º–∞—î)

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞: https://www.last.fm/api/account/create
2. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É:
   - Application name: `My Website`
   - Application description: `Personal website now playing`
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Submit**
4. –°–∫–æ–ø—ñ—é–π—Ç–µ **API Key** (–ù–ï Secret!)

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å dev —Å–µ—Ä–≤–µ—Ä

```bash
cd ryoka-website-v2

# –ó—É–ø–∏–Ω—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –∑–Ω–æ–≤—É
npm run dev
```

### 4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ http://localhost:3000
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ DevTools (F12)
3. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ Console
4. –®—É–∫–∞–π—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ `[Last.fm]` –∞–±–æ `[NowPlaying]`

### 5. –ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

#### ‚ùå `[Last.fm] API key not found`
**–†—ñ—à–µ–Ω–Ω—è:** –î–æ–¥–∞–π—Ç–µ `LASTFM_API_KEY` –≤ `.env.local`

#### ‚ùå `[Last.fm] API error: 6 User not found`
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `LASTFM_USERNAME` (–∑–∞—Ä–∞–∑ –º–∞—î –±—É—Ç–∏ `TheRyoka`)

#### ‚ùå `[Last.fm] API error: 10 Invalid API key`
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ API –∫–ª—é—á –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π

#### ‚ùå `[Last.fm] No tracks found`
**–ú–æ–∂–ª–∏–≤–æ:** 
- –ó–∞—Ä–∞–∑ –Ω—ñ—á–æ–≥–æ –Ω–µ –≥—Ä–∞—î –Ω–∞ Last.fm
- –ü—Ä–æ—Ñ—ñ–ª—å –ø—Ä–∏–≤–∞—Ç–Ω–∏–π
- Scrobbling –≤–∏–º–∫–Ω–µ–Ω–∏–π

#### ‚úÖ `[Last.fm] Now playing: Song Name by Artist`
**–í—ñ–¥–º—ñ–Ω–Ω–æ!** –í—ñ–¥–∂–µ—Ç –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

---

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API –Ω–∞–ø—Ä—è–º—É

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –ø—Ä–∞—Ü—é—î API Last.fm:

```bash
# –ó–∞–º—ñ–Ω—ñ—Ç—å YOUR_API_KEY –Ω–∞ –≤–∞—à –∫–ª—é—á
curl "https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=TheRyoka&api_key=YOUR_API_KEY&format=json&limit=1"
```

–ú–∞—î –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ JSON –∑ —Ç—Ä–µ–∫–∞–º–∏.

---

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
```
http://localhost:3000/api/lastfm
```

–ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ JSON:
```json
{
  "isPlaying": true,
  "title": "Song Name",
  "artist": "Artist Name",
  "album": "Album Name",
  "image": "https://...",
  "url": "https://..."
}
```

–ê–±–æ —è–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –≥—Ä–∞—î:
```json
{
  "isPlaying": false
}
```

---

## –ß–æ–º—É –º–æ–∂–µ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏?

### 1. Username –∑–º—ñ–Ω–∏–≤—Å—è
- –ë—É–ª–æ: `just-ryoka`
- –°—Ç–∞–ª–æ: `TheRyoka`
- **–†—ñ—à–µ–Ω–Ω—è:** –û–Ω–æ–≤—ñ—Ç—å `.env.local`

### 2. –ù–µ–º–∞—î API –∫–ª—é—á–∞
**–†—ñ—à–µ–Ω–Ω—è:** –î–æ–¥–∞–π—Ç–µ `LASTFM_API_KEY` –≤ `.env.local`

### 3. –°–µ—Ä–≤–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–≤—Å—è
**–†—ñ—à–µ–Ω–Ω—è:** –ó—É–ø–∏–Ω—ñ—Ç—å —ñ –∑–∞–ø—É—Å—Ç—ñ—Ç—å `npm run dev` –∑–Ω–æ–≤—É

### 4. –ù—ñ—á–æ–≥–æ –Ω–µ –≥—Ä–∞—î
- –¢—Ä–µ–±–∞ —â–æ–± –∑–∞—Ä–∞–∑ —â–æ—Å—å –≥—Ä–∞–ª–æ –Ω–∞ Spotify/Apple Music/YouTube –∑ scrobbling
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ scrobbling —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π –Ω–∞ Last.fm

### 5. –ü—Ä–æ—Ñ—ñ–ª—å –ø—Ä–∏–≤–∞—Ç–Ω–∏–π
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—ñ –Ω–∞ Last.fm
- Recent tracks –º–∞—é—Ç—å –±—É—Ç–∏ –ø—É–±–ª—ñ—á–Ω–∏–º–∏

---

## –®–≤–∏–¥–∫–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —Ç–∞ –≤—Å—Ç–∞–≤—Ç–µ:

```javascript
fetch('/api/lastfm')
  .then(r => r.json())
  .then(d => console.log('Last.fm response:', d))
  .catch(e => console.error('Error:', e));
```

–¶–µ –ø–æ–∫–∞–∂–µ —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î API.

---

## –í—Å–µ —â–µ –Ω–µ –ø—Ä–∞—Ü—é—î?

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–∞–π–ª `.env.local` —ñ—Å–Ω—É—î
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –∫–ª—é—á –±–µ–∑ –ª–∞–ø–æ–∫ —ñ –ø—Ä–æ–±—ñ–ª—ñ–≤
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ dev —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π
4. –û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R)
5. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –ø–æ–º–∏–ª–∫–∏

---

## –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

- Last.fm API Account: https://www.last.fm/api/account/create
- Last.fm API Docs: https://www.last.fm/api/intro
- –í–∞—à –ø—Ä–æ—Ñ—ñ–ª—å: https://www.last.fm/user/TheRyoka
- Recent tracks: https://www.last.fm/user/TheRyoka/library

---

**–ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –≤—ñ–¥–∂–µ—Ç –º–∞—î –∑'—è–≤–∏—Ç–∏—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–ª–∏ —â–æ—Å—å –≥—Ä–∞—î! üéµ**
